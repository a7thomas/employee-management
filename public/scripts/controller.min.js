"use strict";app.controller("adminController",["$location","$scope","$rootScope","$cookies","Upload",function(e,o,s,r,n){s.mode="logout";var t=r.get("token");"admin"===t?(s.profile="admin-home",o.add=function(e){e.upload=n.upload({url:"/admin/registration",data:{name:o.name,email:o.email,designation:o.designation,phNo:o.phNo,gender:o.gender,userType:o.userType,file:e}}).success(function(e){o.errorBlock=e.errorBlock,o.successBlock=e.successBlock}),o.name="",o.email="",o.designation="",o.phNo="",o.successBlock="",o.newRegister.$setUntouched(),o.newRegister.$setPristine()}):e.path("/login")}]),app.controller("listController",["$location","$scope","adminService","$rootScope","$cookies",function(e,o,s,r,n){r.mode="logout";var t=n.get("token");"admin"===t?(r.profile="admin-home",s.list().success(function(e){o.employees=e}),o.delete=function(e){s.deleteUser(e).success(function(e){s.list().success(function(e){o.employees=e})})}):e.path("/login")}]),app.controller("loginController",["$scope","loginService","$location","$rootScope","$cookies",function(e,o,s,r,n){n.remove("token"),n.remove("info"),r.mode="login",e.login=function(){var r={username:e.username,password:e.password};o.loginUser(r).success(function(o){null!==o?"admin"===o.userType?s.path("/admin-home"):(localStorage.details=JSON.stringify(o),s.path("/user-home")):e.errorBlock="Invalid username/password"})}}]),app.controller("ngConfirmController",["$scope","$modalInstance","message",function(e,o,s){e.message=s,e.yes=function(){o.close()},e.no=function(){o.dismiss()}}]),app.controller("changePasswordController",["$scope","passwordService","$rootScope","$cookies",function(e,o,s,r){var n=r.get("token");"admin"===n?s.profile="admin-home":s.profile="user-home",e.change=function(){var s={currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword};o.changePassword(s).success(function(o){e.successBlock=o.successBlock,e.errorBlock=o.errorBlock}),e.currentPassword="",e.newPassword="",e.confirmPassword="",e.passwordBlock.$setUntouched(),e.passwordBlock.$setPristine()}}]),app.controller("forgotPasswordController",["$scope","passwordService","$rootScope",function(e,o,s){s.mode="login",e.send=function(){var s={email:e.email};o.forgotPassword(s).success(function(o){e.errorMsg=o.errorMsg,e.successMsg=o.successMsg})}}]),app.controller("resetPasswordController",["$location","$scope","passwordService","$rootScope","$routeParams",function(e,o,s,r,n){r.mode="login",o.reset=function(){var r={password:o.password,id:n.id};s.resetPassword(r).success(function(s){1===s.n?e.path("/login"):(o.errorBlock="",window.confirm("This link is not valid"),e.path("/login"))})}}]),app.controller("programController",["$location","$scope","$rootScope","adminService","$cookies",function(e,o,s,r,n){s.mode="logout";var t=n.get("token");"user"===t||"admin"===t?("user"===t?s.profile="user-home":s.profile="admin-home",r.getProgram().success(function(e){o.programs=e}),o.add=function(){var e={programName:o.programName,venue:o.venue,description:o.description,date:o.date};r.addProgram(e).success(function(e){o.errorBlock=e.errorBlock,o.successBlock=e.successBlock,o.programName="",o.email="",o.venue="",o.description="",o.date="",o.newRegister.$setUntouched(),o.newRegister.$setPristine()})}):e.path("/login")}]),app.controller("searchController",["$location","$scope","searchService","$rootScope","$cookies",function(e,o,s,r,n){r.mode="logout",o.search=function(){var t={search:o.find};"admin"!==n.get("token")&&"user"!==n.get("token")||null!=o.find&&s.search(t).success(function(s){if(r.users="",0!==s.length)r.users=s,r.err="",e.path("/search"),o.find="";else{var n=document.getElementById("alert1");n.style.display="block"}})}}]),app.controller("searchedController",["$scope","searchService","$rootScope","$routeParams","$cookies",function(e,o,s,r,n){var t=r.id,a=n.get("token");"user"===a?s.profile="user-home":s.profile="admin-home",o.searchUser(t).success(function(o){e.details=o,e.dob=new Date(o.personalInfo.dob)})}]),app.controller("slideShowController",["$scope","$cookies","$rootScope","$timeout",function(e,o,s,r){var n=4,t=3e3,a=o.get("token");"user"===a||"admin"===a?(s.mode="logout","user"===a?s.profile="user-home":s.profile="admin-home"):s.mode="login",e.slideshow=1;var c=r(function o(){e.slideshow=e.slideshow%n+1,c=r(o,t)},t)}]),app.controller("userController",["$scope","$rootScope","$location","userUpdateService","$cookies","picUpload",function(e,o,s,r,n,t){o.mode="logout";var a=n.get("token");if("user"===a){o.profile="user-home";var c=JSON.parse(localStorage.details);e.details=c,e.dob=new Date(c.personalInfo.dob),e.updatePersonal=function(){var o={firstName:e.details.personalInfo.firstName,lastName:e.details.personalInfo.lastName,address:e.details.personalInfo.address,phNo:e.details.personalInfo.mobileNo,dob:e.dob};r.updateUser(o).success(function(e){localStorage.details=JSON.stringify(e),r.changeAttribute()})},e.updateAccount=function(){var o={accountNo:e.details.accounts.acNo,bankName:e.details.accounts.bankName,panNo:e.details.accounts.panNo};r.updateAccount(o).success(function(e){localStorage.details=JSON.stringify(e),r.changeAttribute()})},e.updateEducation=function(){var o={tenthPercentage:e.details.education.tenthPercentage,twelfthPercentage:e.details.education.twelfthPercentage,degree:e.details.education.degree,other:e.details.education.other};r.updateEducation(o).success(function(e){localStorage.details=JSON.stringify(e),r.changeAttribute()})},e.changePic=function(){var o=e.myFile;if(null!=o){var s="/admin/changePic";t.uploadFileToUrl(o,s).success(function(o){localStorage.details=JSON.stringify(o),e.details.imagePath=o.imagePath})}}}else s.path("/login")}]);